# 三國志覇道 編制管理アプリ v144

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Version](https://img.shields.io/badge/version-1.44-blue.svg)](https://github.com/amatsuki5032/hadou-v140/releases)
[![Demo](https://img.shields.io/badge/demo-live-success.svg)](https://amatsuki5032.github.io/hadou-v140/)

三國志覇道の部隊編制を効率的に管理するWebアプリケーション。プロファイル別管理、画像表示、履歴機能など充実した機能を搭載。

## 🌐 デモ

**アプリURL**: https://amatsuki5032.github.io/hadou-v140/

ブラウザで今すぐ利用可能！インストール不要。

---

## ✨ 主要機能

### 📋 編制管理
- **10パターン編制** × 12部隊（主城6・分城3・出城3）
- **プロファイル別管理**（P0-P4で独立管理）
- プロファイル間コピー機能
- 編制名のカスタマイズ
- 部隊ごとの折りたたみ
- おススメ部隊設定
- 武将・編制コメント機能
- 戻すボタン（Undo機能）

### 🎖️ 武将管理（424名）
- **LR**: 90名
- **UR**: 107名
- **SSR**: 146名
- **SR**: 43名
- **R**: 38名

#### フィルタ機能
- レアリティフィルタ（排他的動作）
- 兵種フィルタ（排他的動作）
- 勢力フィルタ
- 侍従位置フィルタ
- お気に入り・おススメ表示
- 不使用設定

#### 配置機能
- ドラッグ&ドロップ
- ダブルクリック自動配置（タブ別優先）
- UR武将重複チェック
- UR武将ダブルクリック削除

### 💎 名宝管理（209個）
- カテゴリ：武器・防具・文物
- レアリティ：UR/SSR/SR/R
- お気に入り・不使用設定
- ドラッグ&ドロップ配置

### 🖼️ 画像表示（v141〜）
- 武将アイコン表示（リスト・編制画面）
- 名宝アイコン表示（リスト・編制画面）
- 遅延読み込み対応

### 💾 データ管理
- **LocalStorage自動保存**
- 全体バックアップ（エクスポート/インポート）
- 単一編制エクスポート/インポート
- プロファイルエクスポート
- v83以降の全バージョンと互換

---

## 🚀 クイックスタート

### オンライン版（推奨）
ブラウザで以下のURLにアクセス：
```
https://amatsuki5032.github.io/hadou-v140/
```

### ローカル実行

#### 1. リポジトリをクローン
```bash
git clone https://github.com/amatsuki5032/hadou-v140.git
cd hadou-v140
```

#### 2. ローカルサーバーを起動

**Windows:**
```bash
start-server.bat
```

**Mac/Linux:**
```bash
chmod +x start-server.sh
./start-server.sh
```

または、Pythonで直接起動：
```bash
python -m http.server 8000
```

#### 3. ブラウザでアクセス
```
http://localhost:8000
```

---

## 📁 ファイル構成

```
hadou-v140/
│
├── index.html                          # エントリーポイント (6KB)
├── app.js                              # メインアプリケーション (370KB)
├── utils.js                            # ユーティリティ関数 (6KB)
├── config.js                           # 設定・定数 (6KB)
├── styles.css                          # スタイル定義 (35KB)
│
├── data-lr-generals.js                 # LR武将データ (73KB)
├── data-ur-generals.js                 # UR武将データ (71KB)
├── data-ssr-generals.js                # SSR武将データ (31KB)
├── data-sr-generals.js                 # SR武将データ (9KB)
├── data-r-generals.js                  # R武将データ (7KB)
├── data-all-generals-integration.js    # 武将データ統合
├── data-all-treasures.js               # 名宝データ (27KB)
├── data-skill-effects.js               # 技能効果データ (66KB)
│
├── firebase-config.js                  # Firebase設定
├── firebase-sync-addon.js              # 同期機能
│
├── start-server.bat                    # Windows起動スクリプト
├── start-server.sh                     # Mac/Linux起動スクリプト
└── README.md                           # このファイル
```

**総ファイルサイズ**: 約500KB

---

## 🔄 バージョン履歴

### v144 (2026-02-03後半) - 現在
**保留機能実装（非表示中）**
- 武将・名宝の一時保管機能
- ドラッグ&ドロップ対応
- 画像表示対応
- 保留内並び替え

### v143 (2026-02-03前半)
**プロファイル機能の安定化**
- プロファイル2-5のバグ修正
- タブ別自動配置優先
- UR武将ダブルクリック削除
- 単一編制エクスポート/インポート

### v142 (2026-02-03)
**プロファイル別編制とコピー機能**
- プロファイル別独立編制（P0-P4）
- プロファイル間コピー機能
- 戻すボタン（Undo機能）
- レアリティ・兵種フィルタの排他的動作
- 武将・編制コメント機能

### v141 (2026-02-02)
**画像表示機能の実装**
- 武将アイコン表示（リスト・編制画面）
- 名宝アイコン表示（リスト・編制画面）
- ItemImageコンポーネント
- 遅延読み込み対応

### v140 (2026-01-16) - Modular Edition
**トークン消費99%削減の大規模リファクタリング**
- モジュール分割（app.js + utils.js + config.js + データファイル）
- GitHub Pages公開
- 旧バージョン完全互換（v83以降）

---

## 💻 技術スタック

| 技術 | バージョン | 用途 |
|------|-----------|------|
| React | 18 | UIフレームワーク |
| Babel | Standalone | JSXトランスパイル |
| LocalStorage | - | データ永続化 |
| Python http.server | 3.x | ローカルサーバー（開発用） |
| CSS3 | - | スタイリング |
| Firebase | 10.x | 同期機能（オプション） |

---

## 📊 データ規模

- **武将**: 424名
  - LR: 90名
  - UR: 107名
  - SSR: 146名
  - SR: 43名
  - R: 38名
- **名宝**: 209個
- **技能効果**: 499個

---

## 🎯 今後の実装予定

### 短期
- [ ] 保留機能の有効化
- [ ] 保留パネル右側配置の最終調整

### 中期
- [ ] 技能効果集計の拡張
- [ ] 能力値計算機能
- [ ] 相性ボーナス計算

### 長期
- [ ] 参軍効果集計
- [ ] 名宝効果集計
- [ ] 部隊戦力表示

---

## 🛠️ 開発者向け情報

### トークン節約
モジュール分割により開発時のトークン消費を99%削減：
- 修正前: 150,000トークン
- 修正後: 1,000トークン

### 互換性
- v83以降の全バージョンと互換
- 侍従位置の自動変換対応

### デプロイ
GitHub Pagesで自動デプロイ。`main`ブランチへのプッシュで自動更新。

---

## 📝 使い方

### 1. 基本操作

#### 武将の配置
1. 左パネルから武将を選択
2. ドラッグして部隊スロットにドロップ
3. または武将をダブルクリックで自動配置

#### 名宝の配置
1. 右パネルから名宝を選択
2. ドラッグして名宝スロットにドロップ
3. または名宝をダブルクリックで自動配置

### 2. プロファイル管理

#### プロファイル切り替え
- 画面上部のP0〜P4ボタンで切り替え
- 各プロファイルで独立した編制を管理

#### プロファイル間コピー
1. コピー元プロファイルを選択
2. 「プロファイルコピー」ボタンをクリック
3. コピー先プロファイルを選択

### 3. データ管理

#### バックアップ
1. 設定画面を開く
2. 「全データエクスポート」をクリック
3. JSONファイルがダウンロードされる

#### 復元
1. 設定画面を開く
2. 「全データインポート」をクリック
3. JSONファイルを選択

---

## 🐛 トラブルシューティング

### 画像が表示されない
- ブラウザのキャッシュをクリア
- ページを再読み込み（Ctrl+F5 / Cmd+Shift+R）

### データが消えた
- LocalStorageを使用しているため、ブラウザのデータクリアで消える可能性あり
- 定期的にエクスポートしてバックアップを推奨

### 起動スクリプトが動かない
- Pythonがインストールされているか確認
- `python --version` でバージョン確認
- Python 3.x が必要

---

## 🤝 コントリビューション

プルリクエスト歓迎！以下の手順でお願いします：

1. このリポジトリをフォーク
2. フィーチャーブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. プルリクエストを作成

---

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

---

## 👤 作成者

**あまつき**
- GitHub: [@amatsuki5032](https://github.com/amatsuki5032)

---

## 🙏 謝辞

三國志覇道プレイヤーの皆様、フィードバックをくださった方々に感謝します。

---

**最終更新**: 2026-02-03  
**バージョン**: v1.44  
**武将数**: 424名  
**名宝数**: 209個  
**技能数**: 499個
