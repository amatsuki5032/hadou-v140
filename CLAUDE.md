# CLAUDE.md - 三國志覇道ツール群 共通ルール

## 絶対禁止事項

以下は理由を問わず禁止。提案も不要。

- ビルドツールの導入（Vite, Webpack, Rollup, esbuild 等）
- ESモジュール化（import/export への変換）
- package.json の作成
- npm / node_modules の使用
- テストフレームワークの導入（Vitest, Jest 等）
- フレームワークの導入（React, Vue, Svelte 等）
- TypeScriptへの変換
- 大規模リファクタリング（提案は可、実行は許可を得てから）

## 技術スタック

- フロントエンド: Vanilla JavaScript（フレームワークなし）
- バックエンド / DB: Firebase（Firestore, Auth, Storage）
- 認証方式: Google認証（Firebase Auth）
- ホスティング: GitHub Pages
- ビルドツール: なし（素のHTML/CSS/JSで完結）
- 管理者: 1人（自分のみ）

HTMLファイルをブラウザで直接開いて動く構成を維持すること。

## 作業ルール

- 指示された作業だけを行う。勝手に「改善」しない
- 1つの作業が終わったら確認を取ってから次に進む
- 複数ファイルに影響する変更は事前に変更範囲を提示する
- 既存の命名規則・設計パターンに合わせる
- CSS修正時は指示箇所以外のプロパティを変更しない

## セキュリティ

- 管理者判定は Firebase Auth の UID のみで行う
- メールアドレスを権限制御に使わない
- 書き込み・更新・削除の最終判断は Firestore Rules / Storage Rules で行う
- フロントJSだけで管理者制御しない

## UI / デザイン

配色コンセプト「雨夜の月」

- 基調色: 墨紺（#09090c / #0e0e12）
- テキスト: 冷たい白（#f0f1f5 / #e2e4ec）
- 操作色（ボタン）: 青（#2563eb）。ボタンにボルドーは使わない
- 装飾色（ヘッダーライン・タグ・カード左ボーダー）: ボルドー（#800020）。装飾部分のみ
- ダーク/ライトモード: CSS変数で1ファイル管理。分けない
- 絵文字＋テキストの組み合わせ禁止（例：🔥 スキル一覧）。絵文字単体のボタンはOK
- ゲーム風・派手な装飾・茶色＋金の配色は避ける

## コード品質

- 変数名・関数名は英語、コメントは日本語OK
- Firebase操作は必ず try-catch で囲む
- エラーはユーザー向けに画面表示する（console.logだけで終わらない）

## 判断基準

セキュリティ ＞ 可読性 ＞ UI美観 ＞ 実装速度
